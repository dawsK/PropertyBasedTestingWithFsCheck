<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Property-Based Testing with F# and FsCheck</title>
    <meta name="description" content="Property-Based Testing with F# and FsCheck">
    <meta name="author" content="Dawson">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="//code.jquery.com/jquery-1.8.0.js"></script>
    <script src="//code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/style.css" />
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/deedle.css" />
    <link type="text/css" rel="stylesheet" href="css/custom.css" />
    <script src="fsharp.formatting/styles/tips.js" type="text/javascript"></script>
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/fsreveal.css">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script language="javascript" type="text/javascript">
        function init()
        {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
        }
        window.addEventListener("load", init, false);
    </script>
</head>
<body>
    <div class="reveal">
        <div class="tip" id="fs1">val ( 10 % 5 should equal 0 ) : unit -&gt; &#39;a<br /><br />Full name: index.( 10 % 5 should equal 0 )</div>
<div class="tip" id="fs2">val modulo : m:&#39;a -&gt; n:&#39;b -&gt; int<br /><br />Full name: index.modulo</div>
<div class="tip" id="fs3">val m : &#39;a</div>
<div class="tip" id="fs4">val n : &#39;b</div>
<div class="tip" id="fs5">val ( 20 % 3 should equal 2 ) : unit -&gt; &#39;a<br /><br />Full name: index.( 20 % 3 should equal 2 )</div>
<div class="tip" id="fs6">val modulo : m:int -&gt; n:int -&gt; int<br /><br />Full name: index.modulo</div>
<div class="tip" id="fs7">val m : int</div>
<div class="tip" id="fs8">val n : int</div>
<div class="tip" id="fs9">val ( 3453234 % 32 should equal 18 ) : unit -&gt; &#39;a<br /><br />Full name: index.( 3453234 % 32 should equal 18 )</div>

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section >
<h2>Property-Based Testing</h2>
<h3>with F# and FsCheck</h3>
<p><img src="images/logo.png" alt="F# Logo" /></p>
<p><div>
<div><i class="fa fa-user"></i> Dawson Kroeker</div>
<div><i class="fa fa-envelope"></i> dkroeker@gmail.com</div>
<div><i class="fa fa-github-square"></i> github.com/dawsk</div>
</div></p>
<aside class="notes">
About Me:<br/>
- Developer at Online Business Systems<br/>
- Worked with Amir on a project<br/>
- Introduced to F# and fell in love with it<br/>
- Amir introduced me to FsCheck<br/>
</aside>
</section>
<section >
<h2><span class="accent">Where </span>are we going?</h2>
<ul>
<li>Define Property-based testing</li>
<li>FsCheck Overview</li>
<li>Demo</li>
<li>Application</li>
</ul>
</section>
<section >
<h2><span class="altHeader">Property-Based</span></h2>
<h1>Testing</h1>
<aside class="notes">
Property-based testing asserts that the characteristics, traits, or attributes of some code always<br/>
holds true, rather than just in example scenarios. It uses randomly generated input data to create<br/>
deterministic automated tests.<br/>
<br/>
It might be helpful to constrast this with what we are more familiar with, example-based testing.<br/>
Let's consider an example...<br/>
</aside>
</section>
<section data-background="images/basement.jpg">
</section>
<section data-background="images/basement.jpg">
<h1><span class="introrust">Clean Up The Basement!!!</span></h1>
</section>
<section >
<section >
<h3>Example-based</h3>
<h1><span class="altHeader">Questions</span></h1>
</section>
<section >
<p>Did you put the <span class="accentYellow">yellow</span> car in the <span class="accent">cupboard?</span>
<br />
<br />
<i class="fa fa-car fa-3x"></i></p>
</section>
<section >
<p>Did you hang the <span class="accent">Spiderman</span> costume that was on the floor by the couch, back on the wall on the
<span class="accentYellow">third</span> hook?</p>
</section>
<section >
<p>Did you <span class="accent">pick up</span> the brown LEGO piece by the <span class="accent">table</span> and put it in the lego box?
<br />
<br />
<img src="images/legohead.png" alt="Lego Head" /></p>
</section>
<section data-background="images/basement2.jpg">
<h1><span class="introrust">FAIL!!!</span></h1>
</section>
</section>
<section >
<section >
<h3>Property-based</h3>
<h1><span class="altHeader">Questions</span></h1>
</section>
<section >
<p>Are all the <span class="accentYellow">toys</span> picked up and put where they belong?
<br />
<br />
<br />
<i class="fa fa-truck fa-3x"></i></p>
</section>
<section >
<p>Does the floor have anything on it besides <span class="accent">furniture</span>?</p>
</section>
<section >
<p>Is the furniture in the <span class="accentYellow">right</span> place?</p>
</section>
</section>
<section >
<section >
<h4>Example with</h4>
<h1>Modulo</h1>
<aside class="notes">
Suppose we would like to implement the modulo operation<br/>
How would we go about testing it?<br/>
</aside>
</section>
<section >
<h2>Example-based testing</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Xunit</span>
<span class="k">open</span> <span class="i">FsUnit</span><span class="o">.</span><span class="i">Xunit</span>

[&lt;<span class="i">Fact</span>&gt;]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="f">``10 % 5 should equal 0``</span> () <span class="o">=</span>
    <span class="i">modulo</span> <span class="n">10</span> <span class="n">5</span> <span class="o">|&gt;</span> <span class="i">should</span> <span class="i">equal</span> <span class="n">0</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="f">modulo</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">m</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">n</span> <span class="o">=</span> <span class="n">0</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span class="i">Fact</span>&gt;]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="f">``20 % 3 should equal 2``</span> () <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs2', 6)" onmouseover="showTip(event, 'fs2', 6)" class="f">modulo</span> <span class="n">20</span> <span class="n">3</span> <span class="o">|&gt;</span> <span class="i">should</span> <span class="i">equal</span> <span class="n">2</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 7)" onmouseover="showTip(event, 'fs6', 7)" class="f">modulo</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="i">m</span> <span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="i">n</span> <span class="o">=</span> 
    <span class="k">match</span> (<span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="i">m</span>, <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="i">n</span>) <span class="k">with</span>
    | (<span class="n">20</span>, <span class="n">3</span>) <span class="k">-&gt;</span> <span class="n">2</span>
    | (_, _) <span class="k">-&gt;</span> <span class="n">0</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span class="i">Fact</span>&gt;]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="f">``3453234 % 32 should equal 18``</span> () <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs6', 13)" onmouseover="showTip(event, 'fs6', 13)" class="f">modulo</span> <span class="n">3453234</span> <span class="n">32</span> <span class="o">|&gt;</span> <span class="i">should</span> <span class="i">equal</span> <span class="n">18</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 14)" onmouseover="showTip(event, 'fs6', 14)" class="f">modulo</span> <span onmouseout="hideTip(event, 'fs7', 15)" onmouseover="showTip(event, 'fs7', 15)" class="i">m</span> <span onmouseout="hideTip(event, 'fs8', 16)" onmouseover="showTip(event, 'fs8', 16)" class="i">n</span> <span class="o">=</span> 
    <span class="k">match</span> (<span onmouseout="hideTip(event, 'fs7', 17)" onmouseover="showTip(event, 'fs7', 17)" class="i">m</span>, <span onmouseout="hideTip(event, 'fs8', 18)" onmouseover="showTip(event, 'fs8', 18)" class="i">n</span>) <span class="k">with</span>
    | (<span class="n">20</span>, <span class="n">3</span>) <span class="k">-&gt;</span> <span class="n">2</span>
    | (<span class="n">3453234</span>, <span class="n">32</span>) <span class="k">-&gt;</span> <span class="n">18</span>
    | (_, _) <span class="k">-&gt;</span> <span class="n">0</span>
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section >
<h2>Property-based</h2>
<h1><span class="accentYellow">testing</span></h1>
</section>
<section >
<h2><span class="altHeader">Properties of</span></h2>
<h1>Modulo?</h1>
</section>
<section >
<p><span class="math">\(a \mod n = 0, \text{when } n = 1\)</span></p>
</section>
<section >
<h2><span class="altHeader">Identity</span></h2>
<p><span class="math">\((a \mod n) \mod n = a \mod n\)</span></p>
<aside class="notes">
15 mod 4 = 3, 3 mod 4 still = 3<br/>
</aside>
</section>
<section >
<p><span class="math">\(n^x \mod n = 0, \text{when } x &gt; 0\)</span></p>
<aside class="notes">
If you take a multiple of n, of course you can divide by n it evently<br/>
</aside>
</section>
<section >
<h2><span class="altHeader">Inverse</span></h2>
<p><span class="math">\([(−a \mod n) + (a \mod n)] \mod n = 0\)</span></p>
</section>
<section >
<h2><span class="altHeader">Distributive</span></h2>
<p><span class="math">\((a + b) \mod n = \\ [(a \mod n) + (b \mod n)] \mod n\)</span></p>
</section>
<section >
<p><span class="math">\(ab \mod n = \\ [(a \mod n)(b \mod n)] \mod n\)</span></p>
</section>
</section>
<section >
<section >
<h2>FsCheck</h2>
<span class="yellow">Random Testing for .NET</span>
</section>
<section >
<h3>NuGet Package</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">PM</span><span class="o">&gt;</span> <span class="i">Install</span><span class="o">-</span><span class="i">Package</span> <span class="i">FsCheck</span>
<span class="i">PM</span><span class="o">&gt;</span> <span class="i">Install</span><span class="o">-</span><span class="i">Package</span> <span class="i">FsCheck</span><span class="o">.</span><span class="i">NUnit</span>
<span class="i">PM</span><span class="o">&gt;</span> <span class="i">Install</span><span class="o">-</span><span class="i">Package</span> <span class="i">FsCheck</span><span class="o">.</span><span class="i">Xunit</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3><span class="yellow">Features</span></h3>
<ul>
<li>F# or C#</li>
<li>Asserts your properties multiple times with random data</li>
<li>Automatic input shrinking</li>
<li>Conditional Properties</li>
<li>Classifying test cases</li>
<li>Custom input generators</li>
</ul>
</section>
<section >
<h3>Modulo</h3>
<h1><span class="accentYellow">DEMO</span></h1>
</section>
</section>
<section >
<section >
<h2>How to find properties</h2>
<p><a href="http://fsharpforfunandprofit.com/posts/property-based-testing-2/"><a href="http://fsharpforfunandprofit.com/posts/property-based-testing-2/">http://fsharpforfunandprofit.com/posts/property-based-testing-2/</a></a></p>
<aside class="notes">
Scott Wlaschin<br/>
Choosing properties for property-based testing<br/>
</aside>
</section>
<section >
<h3>Different paths</h3>
<h2><span class="accentYellow">same destination</span></h2>
<i class="fa fa-code-fork fa-5x"></i>
<aside class="notes">
add 1, add 2 same as add 2, add 1<br/>
</aside>
</section>
<section >
<h3><span class="accentYellow">There and back again</span></h3>
<i class="fa fa-exchange fa-5x"></i>
<aside class="notes">
serialization/deserialization<br/>
</aside>
</section>
<section >
<h3>Some things <span class="accentYellow">never</span> change</h3>
<i class="fa fa-exchange fa-5x"></i>
<aside class="notes">
invariants, like ordering of a sorted list<br/>
</aside>
</section>
<section >
<p>The more things change, the more they stay the same</p>
<h2><span class="accentYellow">Idempotence</span></h2>
<aside class="notes">
doing an operation twice results in the same state<br/>
distinct, twice<br/>
</aside>
</section>
<section >
<span class="larger">Solve a <span class="altHeader">smaller</span> problem <span class="accentYellow">first</span></span>
<br/><br/>
<i class="fa fa-scissors fa-5x"></i>
<aside class="notes">
structural induction. If a property holds true for a small partitition, it should be true for a large thing as well<br/>
</aside>
</section>
<section >
<h3>Hard to prove</h3>
<h2><span class="accentYellow">easy to verify</span></h2>
<i class="fa fa-check-circle-o fa-5x"></i>
<aside class="notes">
NP-complete problems, like the knapsack problem<br/>
path through a maze<br/>
</aside>
</section>
<section >
<h3>The test <span class="altHeader larger">oracle</span></h3>
<br/>
<i class="fa fa-magic fa-5x"></i>
<aside class="notes">
comparing algorithm against refactored or improved algorithm<br/>
</aside>
</section>
</section>
<section >
<h2>Roman Numerals</h2>
<h1><span class="accentYellow">Demo</span></h1>
</section>
<section >
<section >
<h2>When to Use Property-based Testing</h2>
</section>
<section >
<ul>
<li>Functions</li>
<li>Lots of possible inputs</li>
<li>Not for integration/slow tests</li>
</ul>
<aside class="notes">
Functions with an easily defined input and output<br/>
If the input space and output space is small, example based testing is fine, just write tests for every scenario<br/>
Don't use them for integration style tests, or any test that is inherently slow. You will be calling your code lots of times<br/>
</aside>
<h2>Sites you <span class="accent">must</span> visit</h2>
<ol>
<li><a href="http://fsharpforfunandprofit.com/"><a href="http://fsharpforfunandprofit.com/">http://fsharpforfunandprofit.com/</a> *</a></li>
<li><a href="http://blog.ploeh.dk/2015/01/10/diamond-kata-with-fscheck/"><a href="http://blog.ploeh.dk/2015/01/10/diamond-kata-with-fscheck/">http://blog.ploeh.dk/2015/01/10/diamond-kata-with-fscheck/</a></a></li>
<li></li>
</ol>
<br /><br />
<div class="footnote">* Note: I stole a LOT of material from here for this presentation.</div>
</section>
</section>
<section >
<h1>Questions?</h1>
</section>


        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
        // Add the nohighlight class and data-noescape attribute to code elements that have already been formatted by FSharp.Formatting
        $('pre.highlighted code').addClass('nohighlight').attr('data-noescape', '');

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,

            transition: 'concave', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            // parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList; } },
                { src: 'plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList; } }
            ]
        });

    </script>
</body>
</html>

